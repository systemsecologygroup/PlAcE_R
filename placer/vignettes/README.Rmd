---
title: "PlAcER: Plastic Accumulation Estimation using R"
author: | 
  | *Davi Castro-Tavares, Esteban Acevedo-Trejos & Jailson F. Moura*
  | Leibniz Centre for Tropical Marine Research - ZMT
date: "`r Sys.Date()`"
output:
  pdf_document: # #html_vignette
    toc: true
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Function to install packages if not installed
check.packages <- function(pkg){
        new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
        if (length(new.pkg)) 
                install.packages(new.pkg, dependencies = TRUE)
        sapply(pkg, require, character.only = TRUE)}

# Load needed packages
packages<-c("dplyr", "knitr", "kableExtra")
check.packages(packages)

```

## Overview


## Installation
To install simply type in the R console
```ruby
install.packages('placer')
```

## Usage
Load data containing observations of precense and absence of plastic debris.   
```{r, echo=FALSE}
library("placer"); library(rmarkdown)
library(knitr); library(kableExtra)
# data(ctern)
ctern[1:10,] %>% tbl_df %>% select(-nest_code) %>% kable(align=rep('c', 8), linesep = "\\addlinespace", booktabs = TRUE) %>% 
  kable_styling(latex_options = "striped") %>% row_spec(0,bold=TRUE) 
#  row_spec(0, bold = T, color = "white", background = "gray")
```


Calculate the bootstrap prevalence probability of plastic based on a specific
number of samples. Then from the resampled data the 95% confidence intervals (CI)
are computed. To quantify the prevalence probability and the CI simply provide
the presence/absense data, the maximum number of sample sizes to test (default 300),
and the number of bootstrap simulations (default 1000) as:

```ruby
ternsci<-placer::plastic.ci(cterns$debris_presence, 300, 1000)
```

Plot the plastic preevalence probability and the confidence interval 
as function of sample size: 
```{r plots, echo=FALSE, fig.cap = "Add here the figure caption"}
library(knitr)    # For knitting document and include_graphics function
ternsci<-placer::plastic.ci(ctern$debris_presence, 30, 100) 
placer::prevalence_plot(ternsci$prevprob,
ternsci$cidtf$N,
ternsci$cidtf$lower_ci,
ternsci$cidtf$upper_ci)
```

## References
